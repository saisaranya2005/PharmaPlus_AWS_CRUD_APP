<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PharmaPlus</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to bottom right, #9abbde, #9f7ce1);
            margin: 0;
            padding: 20px;
            color: #333;
        }
        h2 {
            text-align: center;
            color: #051c34;
        }
        form {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
            background-color: #e1d9d9;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        label {
            font-size: 18px;
            margin: 10px 0 5px;
            color: #000000;
        }
        input[type="text"], input[type="number"], input[type="date"] {
            padding: 10px;
            width: 80%;
            border: 1px solid #06213d;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        button {
            padding: 10px 15px;
            font-size: 16px;
            color: #fff;
            background-color: #28a745;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin:20px;
        }
        button:hover {
            background-color: #218838;
        }
        table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
            background-color: #fff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #0d253e;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        tr:hover {
            background-color: #f1f1f1;
        }
        .delete-btn, .update-btn {
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .delete-btn {
            background-color: #dc3545;
            color: white;
            margin:20px;
        }
        .delete-btn:hover {
            background-color: #c82333;
        }
        .update-btn {
            background-color: #5b6919;
            color: white;
            margin:20px;
        }
        .update-btn:hover {
            background-color: #7fd900;
        }
        .image-placeholder {
            width: 100px;
            height: 100px;
            background-color: #e0e0e0;
            border: 1px dashed #bbb;
            border-radius: 4px;
            margin: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #bbb;
        }
        .gallery {
            margin-top: 40px;
            text-align: center;
        }

        .gallery img:hover {
            transform: scale(1.05);
        }
        
        .gallery {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .gallery img {
            width: 400px;
            height: 400px;
            margin: 10px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        footer {
            margin-top: 40px;
            text-align: center;
            color: #555;
            font-style: italic;
        }
    </style>
</head>
<body>

    <h2>PharmaPlus</h2>
    <p style="text-align: center; color: #555;">“Your health, our priority.”</p>

    <form id="medicineForm">
        <label for="medicineId">Medicine ID:</label>
        <input type="text" id="medicineId" required placeholder="Enter Medicine ID">

        <label for="medicineName">Medicine Name:</label>
        <input type="text" id="medicineName" required placeholder="Enter Medicine Name">

        <label for="use">Use:</label>
        <input type="text" id="use" required placeholder="Enter Use">

        <label for="expiryDate">Expiry Date:</label>
        <input type="date" id="expiryDate" required>
        
        <img src="https://www.odtap.com/wp-content/uploads/2021/04/e-pharmacy-business-model.png" width="300px" height="300px" alt="med1">
        <button type="button" onclick="addMedicine()" >Add Medicine</button>
    </form>

    <h2>Medicine List:</h2>

    <table id="medicineTable">
        <thead>
            <tr>
                <th>Medicine ID</th>
                <th>Medicine Name</th>
                <th>Use</th>
                <th>Expiry Date</th>
                <th>Days Left</th>
                <th>Created At</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="medicineTableBody"></tbody>
    </table>

    
    <h2>Our Collections</h2>
    <div class="gallery">
        <img src="https://plus.unsplash.com/premium_photo-1668487826871-2f2cac23ad56?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8bWVkaWNpbmV8ZW58MHx8MHx8fDA%3D" alt="med1">
        <img src="https://images.unsplash.com/photo-1522335579687-9c718c5184d7?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8bWVkaWNpbmV8ZW58MHx8MHx8fDA%3D" alt="med2">
        <img src="https://content.jdmagicbox.com/v2/comp/chennai/c9/044pxx44.xx44.161222114929.u2c9/catalogue/medplus-tambaram-west-chennai-chemists-3r0htlw.jpg" alt="med3">
        <img src="https://etimg.etb2bimg.com/thumb/msid-98744818,imgsize-32116,width-1200,height=765,overlay-ethealth/pharma/dcgi-says-medicines-should-be-sold-only-under-direct-supervision-of-pharmacists-in-retail-medical-stores.jpg" alt="med4">
        <img src="https://5.imimg.com/data5/EL/NR/VE/SELLER-84516085/medical-store-rack.jpeg" alt="med5">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQpwnFzqloPwbTlUtdzOxOs9RJ_4Fv009YsKg&s" alt="med6">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4f4D0-_SGLnqK_p9J6guDc9bUqWx-t1VovQ&s" alt="med7">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcScxwOMIX5mTKWna2nu10Bl-fLq4yztRjSMEw&s" alt="med8">
    </div>


    <footer>
        <p>“Caring for you and your loved ones.”</p>
        <p>&copy; 2024 PharmaPlus. All Rights Reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetchMedicines();
        });

        function addMedicine() {
            var medicineId = document.getElementById('medicineId').value;
            var medicineName = document.getElementById('medicineName').value;
            var use = document.getElementById('use').value;
            var expiryDate = document.getElementById('expiryDate').value;

            var data = {
                operation: 'addMedicine',
                medicineid: medicineId,
                medicineName: medicineName,
                use: use,
                expiryDate: expiryDate
            };

            fetch('https://939hhaifpg.execute-api.eu-north-1.amazonaws.com/stage1/getData', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            })
            .then(response => response.json())
            .then(result => {
                alert(result.body);
                document.getElementById('medicineForm').reset();
                fetchMedicines();
            })
            .catch(error => {
                console.error('Error adding medicine:', error);
            });
        }

        function fetchMedicines() {
            var requestData = {
                operation: 'getMedicines'
            };

            fetch('https://939hhaifpg.execute-api.eu-north-1.amazonaws.com/stage1/getData', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(requestData),
            })
            .then(response => response.json())
            .then(responseData => {
                let medicines = Array.isArray(responseData.body) ? responseData.body : JSON.parse(responseData.body);
                const tableBody = document.getElementById('medicineTableBody');
                tableBody.innerHTML = '';  // Clear previous table rows

                medicines.forEach(medicine => {
                    updateMedicineTable(medicine);
                });
            })
            .catch(error => {
                console.error('Error fetching medicines:', error);
            });
        }

        function updateMedicineTable(medicine) {
            var tableBody = document.getElementById('medicineTableBody');
            var row = tableBody.insertRow();

            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);

            cell1.textContent = medicine.medicineid;
            cell2.textContent = medicine.medicineName;
            cell3.textContent = medicine.use;
            cell4.textContent = medicine.expiryDate;
            cell5.textContent = medicine.daysLeft;
            cell6.textContent = medicine.createdAt;

            // Update Button
            var updateButton = document.createElement('button');
            updateButton.textContent = 'Update';
            updateButton.className = 'update-btn'; 
            updateButton.onclick = function () {
                updateMedicineDetails(medicine.medicineid);
            };
            cell7.appendChild(updateButton);

            // Delete Button
            var deleteButton = document.createElement('button');
            deleteButton.textContent = 'Delete';
            deleteButton.className = 'delete-btn'; 
            deleteButton.onclick = function () {
                deleteMedicine(medicine.medicineid);
            };
            cell7.appendChild(deleteButton);
        }

        function updateMedicineDetails(medicineId) {
            var newUse = prompt("Enter new use for Medicine ID: " + medicineId);
            var newExpiryDate = prompt("Enter new expiry date for Medicine ID (YYYY-MM-DD): " + medicineId);
            
            if (newUse === null && newExpiryDate === null) {
                return; // User canceled both prompts
            }

            var data = {
                operation: 'updateMedicine',
                medicineid: medicineId,
                newUse: newUse,
                newExpiryDate: newExpiryDate
            };

            fetch('https://939hhaifpg.execute-api.eu-north-1.amazonaws.com/stage1/updateData', {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            })
            .then(response => response.json())
            .then(result => {
                alert(result.body);
                fetchMedicines();  // Refresh medicine list after updating
            })
            .catch(error => {
                console.error('Error updating medicine:', error);
            });
        }

        function deleteMedicine(medicineId) {
            var data = {
                operation: 'deleteMedicine',
                medicineid: medicineId
            };

            fetch('https://939hhaifpg.execute-api.eu-north-1.amazonaws.com/stage1/deleteData', {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                alert(result.body);
                fetchMedicines(); 
            })
            .catch(error => {
                console.error('Error deleting medicine:', error);
            });
        }
    </script>
</body>
</html>
